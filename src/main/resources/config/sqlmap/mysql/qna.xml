<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.bitcode.repository.mapper.QnaMapper">
	<resultMap id="qnaMap" type="qna">
		<result column="no" property="no" />
		<result column="group_no" property="groupNo" />
		<result column="group_order" property="groupOrder" />
		<result column="depth" property="depth" />
		<result column="id" property="id" />
		<result column="language_code" property="code" />
		<result column="title" property="title" />
		<result column="content" property="content" />
		<result column="reg_date" property="regDate" />
		<result column="view_cnt" property="viewCnt" />
		<result column="like_cnt" property="likeCnt" />
		<result column="stsfc_code" property="stsfcCode" />
		<result column="file_path" property="filePath" />
		<result column="ori_name" property="oriName" />
		<result column="system_name" property="systemName" />
	</resultMap>
	<select id="selectBoardByNo" parameterType="int" resultMap="qnaMap">
	   select * 
        from tb_qna_board b
        inner 
		join tb_qna_file f
        on b.no = f.no
	   where b.no = #{no}
	</select>
	<insert id="insertBoard" parameterType="qna">
	   <selectKey keyProperty="no" resultType="int" order="AFTER">
    	SELECT LAST_INSERT_ID()
  	</selectKey>
		insert into
		tb_qna_board(group_no,id,language_code,title,content)
		values(#{no},#{id},#{code},#{title},#{content})
	</insert>
	<insert id="insertQnaFile" parameterType="qnaFile">
		insert into tb_qna_file(no,file_path,ori_name,system_name,file_size)
		values(#{no},#{filePath},#{oriName},#{systemName},#{fileSize})
	</insert>

</mapper>