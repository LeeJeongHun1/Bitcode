<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.bitcode.repository.mapper.UserInfoMapper">
	<resultMap id="qnaMap" type="qna">
		<result column="no" property="no" />
		<result column="group_no" property="groupNo" />
		<result column="group_order" property="groupOrder" />
		<result column="depth" property="depth" />
		<result column="id" property="id" />
		<result column="language_code" property="code" />
		<result column="language_name" property="codeName" />
		<result column="title" property="title" />
		<result column="content" property="content" />
		<result column="reg_date" property="regDate" />
		<result column="view_cnt" property="viewCnt" />
		<result column="like_cnt" property="likeCnt" />
		<result column="answer_at" property="answerAt" />
		<result column="stsfc_code" property="stsfcCode" />
	</resultMap>
	
<!-- 	<select id="selectmyQuestion" parameterType="string" resultMap="qnaMap"> -->
<!-- 		select * -->
<!-- 		  from tb_qna_board -->
<!-- 		 where id = #{id} -->
<!-- 	</select> -->


	<resultMap id="stsfcCodeMap" type="stsfcCode">
		<result column="stsfc_code" property="stsfcCode" />
		<result column="stsfc_step" property="stsfcStep" />
	</resultMap>
	
	<select id="selectmyQuestion" parameterType="string" resultMap="stsfcCodeMap">
		select s.stsfc_step, s.stsfc_code, q.no, q.id, q.title
		from tb_stsfc_code s
		inner 
		join tb_qna_board q
		on q.stsfc_code = s.stsfc_code
		where id = #{id};
	</select>
	


	<resultMap id="attendMap" type="attendance">
		<result column="id" property="id" />
		<result column="att_id" property="attID" />
		<result column="att_date" property="attDate" />
	</resultMap>
	<insert id="insertAttendance" parameterType="attendance">
	insert into tb_attendance(
		id,
		att_date
	) values (
		#{id},
		#{attDate}
		)
	</insert>
	<select id="selectAttendance" resultMap="attendMap" parameterType="string">
		select *
		  from tb_attendance
		 where id = #{id} 
	</select>
	<select id="selectAttenByIdDate" resultMap="attendMap" parameterType="attendance">
		select *
		  from tb_attendance
		 where id = #{id} and
		 	   date_format(att_date, '%e%c%Y') = date_format(now(), '%e%c%Y')
	</select>
</mapper>